<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BOTATO ‚Äî Smart Urban Farming</title>

  <!-- Baloo 2 font -->
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@600;800&display=swap" rel="stylesheet">
  <!-- Inter font for base text -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
  <!-- Font Awesome for icons -->
  <script src="https://kit.fontawesome.com/a2d9b6c3e0.js" crossorigin="anonymous"></script>
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    :root{
      --bg:#fbfdf8;
      --card:#ffffff;
      --muted:#6b7280;
      --accent:#2f855a;
      --accent-2:#16a34a;
      --accent-3:#1f6feb;
      --danger:#e11d48;
      --glass: rgba(255,255,255,0.6);
      font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }

    html { scroll-behavior: smooth; }
    body{margin:0;background:linear-gradient(180deg,#f6fff7 0%,var(--bg) 100%);color:#0f172a;line-height:1.55;font-family:'Inter',system-ui,sans-serif;}
    /* Header */
    header{position:fixed;top:0;left:0;right:0;height:72px;display:flex;align-items:center;justify-content:space-between;padding:12px 28px;background:rgba(255,255,255,0.93);backdrop-filter:blur(10px);box-shadow:0 6px 18px rgba(15,23,42,0.08);z-index:1000;transition:background .2s;}
    .brand{display:flex;gap:14px;align-items:center}
    .logo{width:50px;height:50px;background:linear-gradient(135deg,var(--accent),var(--accent-2));border-radius:12px;display:flex;align-items:center;justify-content:center;color:white;font-family:'Baloo 2',cursive;font-weight:900;font-size:2rem;box-shadow:0 2px 8px rgba(44,183,124,0.07);}
    .brand .name{font-family:'Baloo 2',cursive;font-size:20px;letter-spacing:.5px;}
    .tag{font-size:12px;color:var(--muted);margin-top:2px}

    nav{display:flex;gap:22px;align-items:center}
    nav a{position:relative;padding:9px 12px;border-radius:8px;color:var(--muted);text-decoration:none;font-weight:700;transition:color .18s,background .18s}
    nav a:hover{color:var(--accent-3);background:rgba(31,111,235,0.07);}
    nav a.active{color:var(--accent);background:rgba(47,133,90,0.08);}

    main{padding-top:96px;max-width:1200px;margin:0 auto}

    section{padding:72px 22px}
    .hero{display:flex;gap:38px;align-items:flex-start}
    .hero .left{flex:1}
    .hero h1{font-family:'Baloo 2',cursive;font-size:38px;margin:0;color:#043927;line-height:1.18}
    .hero p{color:var(--muted);font-size:16px;margin-top:10px}

    /* three charts row */
    .row{display:flex;gap:22px;margin-top:16px;}
    .card{background:var(--card);padding:22px 18px 16px 18px;border-radius:15px;box-shadow:0 6px 18px rgba(15,23,42,0.055);flex:1;transition:transform .16s,box-shadow .16s;}
    .card:hover{transform:translateY(-6px) scale(1.03);box-shadow:0 16px 32px rgba(31, 111, 235, 0.07);}
    .card h3{margin:0 0 8px;font-size:17px;}
    .card p{color:var(--muted);font-size:14.5px;margin:0}

    /* Product detail */
    .product{display:flex;gap:24px;align-items:center;margin-top:34px}
    .product .img{width:340px;height:210px;border-radius:16px;background:linear-gradient(135deg,#e6fff0,#f3fff6);display:flex;align-items:center;justify-content:center;color:var(--accent-2);font-weight:800;font-size:1.25rem;box-shadow:0 6px 22px rgba(44,183,124,0.04);}
    .product .desc{flex:1}
    .muted{color:var(--muted)}

    /* Funfacts */
    .funfacts{display:flex;gap:20px;margin-top:26px}
    .badge{display:flex;flex-direction:column;align-items:center;padding:18px 14px;border-radius:13px;background:linear-gradient(180deg,white 65%,#f7fff8);flex:1;box-shadow:0 2px 14px rgba(44,183,124,0.03);}
    .badge .title{font-weight:800;color:#04442f;font-size:15.5px;}
    .badge p{color:var(--muted);text-align:center;margin-top:8px;font-size:13.5px;}

    /* CTA */
    .cta{margin-top:40px;text-align:center}
    .cta h2{margin:0;font-size:30px;line-height:1.2}
    .cta p{color:var(--muted);margin-top:14px;font-size:15.5px;}
    .emph{color:var(--accent-2);font-weight:900}
    .emph-lg{font-size:38px;color:var(--accent-3);font-weight:900}

    /* SDGs grid */
    .sdgs{display:flex;gap:16px;flex-wrap:wrap;margin-top:24px}
    .sdg{padding:15px 14px 12px;border-radius:13px;background:linear-gradient(180deg,#fff 70%,#f8fffb);flex:1;min-width:220px;box-shadow:0 2px 10px rgba(31,111,235,0.04);}
    .sdg h4{margin:0;font-size:16px;}
    .sdg p{color:var(--muted);margin-top:8px;font-size:14px;}

    .contact{display:flex;flex-direction:column;gap:10px;margin-top:22px}
    .contact .line{display:flex;gap:10px;align-items:center;font-size:15.5px}

    /* AgroTourism cards horizontal scroll */
    .agro-row{display:flex;gap:18px;overflow-x:auto;padding-bottom:8px;margin-bottom:4px;}
    .agro-card{min-width:310px;background:var(--card);padding:13px;border-radius:13px;box-shadow:0 8px 22px rgba(15,23,42,0.07);transition:transform .16s,box-shadow .16s;}
    .agro-card:hover{transform:translateY(-3px) scale(1.03);box-shadow:0 18px 40px rgba(31,111,235,0.09);}
    .btn{display:inline-block;padding:9px 16px;border-radius:9px;background:var(--accent);color:white;text-decoration:none;font-weight:700;transition:background .18s;}
    .btn:hover{background:var(--accent-2);}

    /* Dashboard */
    .auth-toggle{display:flex;gap:10px}
    .auth-toggle button{padding:11px 16px;border-radius:8px;border:1px solid #e6eef0;background:white;cursor:pointer;font-weight:700;font-size:15px;transition:background .18s,color .18s;}
    .auth-toggle button.active,.auth-toggle button:hover{background:var(--accent-3);color:white;}
    .auth-form{margin-top:18px;background:var(--card);padding:18px 18px 16px 18px;border-radius:13px;box-shadow:0 4px 16px rgba(31,111,235,0.04);}
    .input{display:block;width:100%;padding:10px;border-radius:8px;border:1px solid #e7eef2;margin:8px 0;font-size:15px;}

    .charts{display:flex;gap:14px}
    .small-card{flex:1;padding:16px 10px 15px;border-radius:12px;background:linear-gradient(180deg,#fff,#f6fff8);text-align:center;box-shadow:0 2px 8px rgba(44,183,124,0.035);}
    .small-card .label{color:var(--muted);font-size:13.5px;}
    .small-card .value{font-size:23px;font-weight:900;margin-top:10px;}

    table{width:100%;border-collapse:collapse;margin-top:16px;background:white;border-radius:8px;overflow:hidden;box-shadow:0 2px 8px rgba(44,183,124,0.025);}
    th,td{padding:12px 10px;border-bottom:1px solid #eef2f4;text-align:left;font-size:15px;}
    tr{transition:background .13s;}
    tr:hover{background:#f5fff8;cursor:pointer}

    /* units grid */
    .units{display:grid;grid-template-columns:repeat(auto-fit,minmax(80px,1fr));gap:8px;margin-top:16px;}
    .unit{background:linear-gradient(180deg,#fff,#f7fff9);padding:13px 8px;border-radius:9px;display:flex;flex-direction:column;align-items:center;justify-content:center;transition:transform .18s,box-shadow .18s;}
    .unit:hover{transform:scale(1.08);box-shadow:0 12px 30px rgba(15,23,42,0.09);}
    .unit.alert{background:linear-gradient(180deg,#fff7f8,#ffefef);border:1px solid rgba(225,29,72,0.13)}

    /* modal */
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(1,1,1,0.42);z-index:2000}
    .modal .box{width:92%;max-width:920px;background:white;padding:22px 18px 18px 18px;border-radius:14px;box-shadow:0 16px 48px rgba(31,111,235,0.12);}
    #closeModal{float:right;background:var(--danger);color:white;border:none;padding:7px 13px;font-size:15px;border-radius:7px;cursor:pointer;}

    footer{padding:26px 0 20px;text-align:center;color:var(--muted);font-size:15px;}

    /* responsive tweaks */
    @media (max-width:1100px){
      main{max-width:96vw;}
      .product .img{width:250px;}
    }
    @media (max-width:900px){
      .hero{flex-direction:column;gap:22px;}
      .product{flex-direction:column;gap:16px;}
      .brand .name{font-size:16px}
      .row{flex-direction:column;gap:14px;}
      .charts{flex-direction:column;gap:10px;}
      .funfacts{flex-direction:column;gap:12px;}
      .sdgs{flex-direction:column;gap:10px;}
      .agro-row{flex-direction:column;gap:12px;}
      .agro-card{min-width:unset;}
    }
    @media (max-width:600px){
      section{padding:44px 8px;}
      .modal .box{padding:8px;}
      header{padding:10px 8px;}
      .brand .name{font-size:14px;}
      .cta h2{font-size:22px;}
      .emph-lg{font-size:22px;}
    }
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <div class="logo">B</div>
      <div>
        <div class="name">BOTATO</div>
        <div class="tag">Bring Our Tomorrow Alive Through Organics</div>
      </div>
    </div>
    <nav id="mainNav">
      <a href="#about" data-target="about" class="nav-link">About</a>
      <a href="#agrotour" data-target="agrotour" class="nav-link">AgroTourism</a>
      <a href="#dashboard" data-target="dashboard" class="nav-link">Dashboard</a>
    </nav>
  </header>

  <main>
    <!-- ABOUT -->
    <section id="about">
      <div class="hero">
        <div class="left">
          <h1>Welcome to BOTATO</h1>
          <p>BOTATO adalah solusi urban smart farming berbasis IoT & aquaponics yang mengubah atap dan lahan kota menjadi sumber pangan organik cerdas & ramah lingkungan. Dengan monitoring sensor real-time, automasi, dan desain vertikal, BOTATO menghadirkan produksi sayuran segar & ikan premium di perkotaan dengan efisiensi lahan dan air optimal‚Äîmembawa teknologi pertanian masa depan ke ruang Anda.</p>

          <div class="row">
            <div class="card">
              <h3>Rising Carbon Footprint</h3>
              <p>Konsentrasi aktivitas manusia dan transportasi menyebabkan emisi karbon meningkat drastis di kota-kota besar, memicu pemanasan global dan penurunan kualitas udara.</p>
            </div>
            <div class="card">
              <h3>Food Access & Supply Risks</h3>
              <p>Keterbatasan lahan produksi, ketergantungan pasokan luar daerah, dan jalur distribusi panjang menyulitkan akses pangan segar & terjangkau.</p>
            </div>
            <div class="card">
              <h3>Limited Green & Livable Spaces</h3>
              <p>Pertumbuhan bangunan dan infrastruktur yang padat mengurangi ruang hijau, meningkatkan stres lingkungan, dan menurunkan kualitas hidup masyarakat.</p>
            </div>
          </div>

          <div class="product">
            <div class="img">
              <img src="https://i.ibb.co/2vLz1JH/greenhouse-3d.png" alt="3D Greenhouse Model" style="width:95%;max-height:94%;border-radius:11px;box-shadow:0 3px 14px rgba(47,133,90,.07);" loading="lazy" />
            </div>
            <div class="desc">
              <h3>Smart Vertical Aquaponics Farm</h3>
              <p class="muted">Sistem rak susun terpadu yang menggabungkan kolam ikan (biofilter) dan rak tanam vertikal. Dilengkapi sensor pH, TDS, DO, level air, suhu & kelembapan ‚Äî semua terhubung ke dashboard untuk notifikasi & automasi pompa / dosing.</p>
              <ul style="margin-top:8px;color:var(--muted);font-size:14.5px;padding-left:20px;">
                <li>Monitoring sensor real-time (IoT)</li>
                <li>Automated pump & nutrient dosing</li>
                <li>Hemat ruang & air ‚Äî cocok untuk rooftop</li>
                <li>Mudah skala & deploy ke banyak lokasi</li>
              </ul>
            </div>
          </div>

          <div class="funfacts">
            <div class="badge">
              <div style="font-size:25px">‚ö°</div>
              <div class="title">Fast Growth</div>
              <p>Desain vertikal mempercepat siklus panen dan memungkinkan beberapa panen per tahun.</p>
            </div>
            <div class="badge">
              <div style="font-size:25px">üåø</div>
              <div class="title">Eco‚ÄëFriendly</div>
              <p>Hemat air dan mengurangi jejak karbon dibandingkan pertanian konvensional.</p>
            </div>
            <div class="badge">
              <div style="font-size:25px">ü§ù</div>
              <div class="title">Local Impact</div>
              <p>Meningkatkan ketersediaan pangan lokal dan lapangan kerja berbasis komunitas.</p>
            </div>
          </div>

          <div class="cta">
            <h2><span class="muted">We bring</span> <span class="emph">Green Solution</span><br><span class="muted">for the</span> <span class="emph-lg">Better Future</span></h2>
            <p class="muted">BOTATO mendukung tujuan SDGs melalui inovasi ramah lingkungan & berkelanjutan ‚Äî menghadirkan solusi smart farming di lingkungan perkotaan.</p>

            <div class="sdgs">
              <div class="sdg">
                <h4>Zero Hunger</h4>
                <p>Memperkuat ketersediaan pangan lokal dengan produksi segar di dalam kota.</p>
              </div>
              <div class="sdg">
                <h4>Sustainable Cities</h4>
                <p>Meningkatkan kualitas hidup kota melalui ruang hijau produktif dan efisiensi sumber daya.</p>
              </div>
              <div class="sdg">
                <h4>Responsible Consumption</h4>
                <p>Mendukung rantai pasok yang lebih pendek dan pengurangan limbah pangan.</p>
              </div>
            </div>

            <div class="contact">
              <div class="line"><i class="fab fa-whatsapp fa-lg" style="color:#25D366"></i> <span>Whatsapp: <a href="https://wa.me/6281234567890" style="color:#25D366;text-decoration:underline" target="_blank" rel="noopener">+62 812-3456-7890</a></span></div>
              <div class="line"><i class="fab fa-instagram fa-lg" style="color:#C13584"></i> <span>Instagram: <a href="https://instagram.com/botato_farm" target="_blank" rel="noopener" style="color:#C13584;text-decoration:underline"><strong>@botato_farm</strong></a></span></div>
              <div class="line"><i class="fab fa-tiktok fa-lg" style="color:#000"></i> <span>Tiktok: <a href="https://tiktok.com/@botato_farm" target="_blank" rel="noopener" style="color:#000;text-decoration:underline"><strong>@botato_farm</strong></a></span></div>
              <div class="line"><i class="fas fa-envelope fa-lg" style="color:#6b7280"></i> <span>Email: <a href="mailto:botato_farm@gmail.com" style="color:#6b7280;text-decoration:underline"><strong>botato_farm@gmail.com</strong></a></span></div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- AGROTOURISM -->
    <section id="agrotour">
      <h2>AgroTourism</h2>
      <p class="muted">Experience guided rooftop tours, workshops, and fresh-harvest tasting at our sites across the city.</p>

      <div class="agro-row" style="margin-top:18px">
        <div class="agro-card">
          <div style="height:150px;background:url('https://assets.promediateknologi.id/crop/0x0:0x0/0x0/webp/photo/p3/144/2025/08/10/FotoJet-87-3201873948.jpg') center/cover;border-radius:8px"></div>
          <h4 style="margin:10px 0 4px">Rooftop Mall Paris Van Java, Bandung</h4>
          <div class="muted">Tiket masuk: <strong>Rp 30.000 / person</strong></div>
          <div style="margin-top:10px"><a class="btn" href="#">Buy Ticket</a></div>
        </div>

        <div class="agro-card">
          <div style="height:150px;background:url('https://asset.kompas.com/crops/vZxF9RhGRf_mdoWGYkcphzy3PSA=/155x0:892x491/750x500/data/photo/2022/02/12/6207a6e6ea200.png') center/cover;border-radius:8px"></div>
          <h4 style="margin:10px 0 4px">Rooftop Mall Central Park, Jakarta</h4>
          <div class="muted">Tiket masuk: <strong>Rp 35.000 / person</strong></div>
          <div style="margin-top:10px"><a class="btn" href="#">Buy Ticket</a></div>
        </div>

        <div class="agro-card">
          <div style="height:150px;background:url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTI0IUtbtEnihDDI0AJheFcTfdmnUWoVcjIrA&s') center/cover;border-radius:8px"></div>
          <h4 style="margin:10px 0 4px">Rooftop Mall Paskal Hyper Square, Bandung</h4>
          <div class="muted">Tiket masuk: <strong>Rp 30.000 / person</strong></div>
          <div style="margin-top:10px"><a class="btn" href="#">Buy Ticket</a></div>
        </div>
      </div>
    </section>

    <!-- DASHBOARD -->
    <section id="dashboard">
      <h2>Dashboard</h2>
      <div class="auth-toggle">
        <button id="loginBtn" class="active">Login</button>
        <button id="signupBtn">Sign Up</button>
      </div>

      <div id="authArea" class="auth-form">
        <!-- default: login -->
        <form id="loginForm" autocomplete="on">
          <label>Username</label>
          <input class="input" name="user" placeholder="username" required tabindex="1" />
          <label>Password</label>
          <input class="input" name="pass" type="password" placeholder="password" required tabindex="2" />
          <div style="margin-top:10px"><button class="btn" type="submit">Sign In</button></div>
        </form>

        <form id="signupForm" style="display:none" autocomplete="on">
          <label>Nama Lengkap</label>
          <input class="input" name="namalengkap" placeholder="Nama Lengkap" required tabindex="1" />
          <label>Username</label>
          <input class="input" name="user" placeholder="username" required tabindex="2" />
          <label>Email</label>
          <input class="input" name="email" type="email" placeholder="email@example.com" required tabindex="3" />
          <label>Password</label>
          <input class="input" name="pass" type="password" placeholder="password" required tabindex="4" />
          <div style="margin-top:10px"><button class="btn" type="submit">Create Account</button></div>
        </form>
      </div>

      <div class="charts" style="margin-top:18px">
        <div class="small-card">
          <div class="label">Overall Healthy Farms</div>
          <canvas id="farmPercent" style="max-height:140px"></canvas>
          <div class="value" id="farmPercentVal">78%</div>
        </div>
        <div class="small-card">
          <div class="label">Total Harvest</div>
          <div class="value" id="harvestVal">5,390</div>
          <div class="muted" style="font-size:12px;margin-top:6px">(unit: buah)</div>
        </div>
        <div class="small-card">
          <div class="label">Customer Rating</div>
          <div style="font-size:28px;font-weight:900;margin-top:6px">4.8 ‚òÖ</div>
          <div class="muted" style="font-size:12px;margin-top:6px">Average from surveys</div>
        </div>
      </div>

      <div style="margin-top:18px">
        <input id="search" class="input" placeholder="Search client name..." aria-label="Cari nama klien" />
        <table id="clients">
          <thead><tr><th>Nama Klien</th><th>Luas Lahan</th><th>Unit</th></tr></thead>
          <tbody>
            <tr data-client="adi"><td>Bapak Adi Cahya Sungkono</td><td>70 m¬≤</td><td>10</td></tr>
            <tr data-client="rina"><td>Ibu Rina Amar</td><td>45 m¬≤</td><td>6</td></tr>
            <tr data-client="mario"><td>PT. Hijau Berseri</td><td>320 m¬≤</td><td>40</td></tr>
          </tbody>
        </table>
      </div>
    </section>
  </main>

  <footer>
    ¬© BOTATO ‚Äî Smart Urban Farming
  </footer>

  <!-- Modal for farm detail -->
  <div id="modal" class="modal" role="dialog" aria-hidden="true">
    <div class="box" tabindex="-1">
      <button id="closeModal">Close</button>
      <h3 id="modalTitle">Real-Time Smart Farm Sensor Dashboard</h3>
      <div style="display:flex;gap:12px;margin-top:12px;flex-wrap:wrap;">
        <div style="flex:1;min-width:140px;">
          <canvas id="farmDetailPercent"></canvas>
        </div>
        <div style="flex:1;min-width:140px;">
          <canvas id="farmTemp"></canvas>
        </div>
        <div style="flex:1;min-width:140px;">
          <canvas id="farmHum"></canvas>
        </div>
      </div>

      <div style="margin-top:12px">
        <h4>Units</h4>
        <div id="unitsGrid" class="units"></div>
      </div>
    </div>
  </div>

  <script>
    // Smooth scroll + active nav
    document.querySelectorAll('nav a').forEach(a=>{
      a.addEventListener('click', (e)=>{
        e.preventDefault();
        document.querySelector('#'+a.getAttribute('data-target')).scrollIntoView({behavior:'smooth',block:'start'});
      })
    })

    // IntersectionObserver for nav link active state
    const sections = document.querySelectorAll('section');
    const navLinks = document.querySelectorAll('.nav-link');
    const obs = new window.IntersectionObserver((entries)=>{
      entries.forEach(en=>{
        const id = en.target.id;
        const link = document.querySelector('nav a[data-target="'+id+'"]');
        if(en.isIntersecting){
          navLinks.forEach(n=>n.classList.remove('active'));
          link && link.classList.add('active');
        }
      })
    },{threshold:0.45});
    sections.forEach(s=>obs.observe(s));

    // Dashboard charts
    const farmPercentCtx = document.getElementById('farmPercent');
    new Chart(farmPercentCtx,{type:'doughnut',data:{labels:['Healthy','Needs Attention'],datasets:[{data:[78,22],backgroundColor:['#34d399','#f97316']}]},options:{cutout:'70%',plugins:{legend:{display:false}}}});

    // Modal handling
    const modal = document.getElementById('modal');
    document.getElementById('closeModal').addEventListener('click',()=>{
      modal.style.display='none';modal.setAttribute('aria-hidden','true')
    });

    // client table click -> open modal with sample data
    document.querySelectorAll('#clients tbody tr').forEach(row=>{
      row.addEventListener('click',()=>{
        const name = row.cells[0].innerText;
        document.getElementById('modalTitle').innerText = name + ' ‚Äî Real-Time Smart Farm Sensor Dashboard';
        modal.style.display='flex';modal.setAttribute('aria-hidden','false');
        document.querySelector('.modal .box').focus();
        // populate units
        const unitsGrid = document.getElementById('unitsGrid');
        unitsGrid.innerHTML='';
        const unitCount = parseInt(row.cells[2].innerText,10);
        for(let i=1;i<=unitCount;i++){
          // random sample sensor values
          const temp = (20 + Math.random()*10).toFixed(1);
          const hum = (55 + Math.random()*20).toFixed(0);
          const ph = (6 + Math.random()*2).toFixed(2);
          const dox = (5 + Math.random()*4).toFixed(2);
          const isAlert = (ph<6.2 || dox<4.5 || temp>30);
          const div = document.createElement('div');
          div.className='unit'+(isAlert?' alert':'');
          div.innerHTML = '<div style="font-weight:700">Unit '+i+'</div><div style="font-size:12px;color:var(--muted);margin-top:6px">'+temp+'¬∞C ‚Ä¢ '+hum+'%</div>';
          // hover detail
          div.addEventListener('mouseenter',()=>{
            div.style.width='240px';div.style.gridColumn='span 2';
            div.innerHTML = '<div style="font-weight:800">Unit '+i+' <span style="font-size:12px;margin-left:8px;color:'+ (isAlert? 'var(--danger)':'#16a34a') +'">'+(isAlert? 'ALERT':'OK')+'</span></div>'+
              '<div style="margin-top:8px;color:var(--muted)">Ph: '+ph+' ‚Ä¢ DO: '+dox+' mg/L</div>'+
              '<div style="margin-top:6px;color:var(--muted)">Water level: OK</div>';
          });
          div.addEventListener('mouseleave',()=>{div.style.width='';div.style.gridColumn='';div.innerHTML = '<div style="font-weight:700">Unit '+i+'</div><div style="font-size:12px;color:var(--muted);margin-top:6px">'+temp+'¬∞C ‚Ä¢ '+hum+'%</div>'});
          unitsGrid.appendChild(div);
        }

        // update charts in modal with random-ish data
        const pd = Math.round(60 + Math.random()*30);
        const ctx1 = document.getElementById('farmDetailPercent');
        new Chart(ctx1,{type:'doughnut',data:{labels:['OK','Alert'],datasets:[{data:[pd,100-pd],backgroundColor:['#34d399','#ef4444']}]},options:{cutout:'70%',plugins:{legend:{display:false}}}});
        const ctx2 = document.getElementById('farmTemp');
        new Chart(ctx2,{type:'line',data:{labels:['T-5','T-4','T-3','T-2','T-1','Now'],datasets:[{label:'Temperature ¬∞C',data:[22,23,24,25,24,24],fill:false,borderColor:'#f97316',tension:.2}]},options:{plugins:{legend:{display:false}},scales:{x:{display:false},y:{display:true}}}});
        const ctx3 = document.getElementById('farmHum');
        new Chart(ctx3,{type:'line',data:{labels:['T-5','T-4','T-3','T-2','T-1','Now'],datasets:[{label:'Humidity %',data:[60,62,61,59,58,60],fill:false,borderColor:'#1f6feb',tension:.2}]},options:{plugins:{legend:{display:false}},scales:{x:{display:false},y:{display:true}}}});
      })
    })

    // login/signup toggle
    const loginBtn = document.getElementById('loginBtn');
    const signupBtn = document.getElementById('signupBtn');
    const loginForm = document.getElementById('loginForm');
    const signupForm = document.getElementById('signupForm');
    loginBtn.addEventListener('click',()=>{loginForm.style.display='block';signupForm.style.display='none';loginBtn.classList.add('active');signupBtn.classList.remove('active')});
    signupBtn.addEventListener('click',()=>{loginForm.style.display='none';signupForm.style.display='block';signupBtn.classList.add('active');loginBtn.classList.remove('active')});

    // fake login/signup handling
    loginForm.addEventListener('submit',e=>{
      e.preventDefault();
      alert('Login successful! (Simulasi)');
    });
    signupForm.addEventListener('submit',e=>{
      e.preventDefault();
      alert('Account created! (Simulasi)');
      signupForm.reset();
      loginBtn.click();
    });

    // search filter
    document.getElementById('search').addEventListener('input',(e)=>{
      const q = e.target.value.toLowerCase();
      document.querySelectorAll('#clients tbody tr').forEach(r=>{
        r.style.display = r.cells[0].innerText.toLowerCase().includes(q)?'':'none'
      })
    })

    // style active nav on hover to change color
    document.querySelectorAll('nav a').forEach(a=>{
      a.addEventListener('mouseenter',()=>a.style.color='var(--accent-3)');
      a.addEventListener('mouseleave',()=>{ if(!a.classList.contains('active')) a.style.color=''; });
    });

    // Close modal with Escape key
    document.addEventListener('keydown',function(e){
      if(modal.style.display==='flex' && (e.key==='Escape'||e.keyCode===27)){
        modal.style.display='none';modal.setAttribute('aria-hidden','true')
      }
    });
    // Trap focus in modal for accessibility
    modal.addEventListener('keydown',function(e){
      if(e.key==='Tab'){
        e.preventDefault();
        document.getElementById('closeModal').focus();
      }
    });
  </script>
</body>
</html>